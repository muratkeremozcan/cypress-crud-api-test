name: cypress-crud-api-test
on:
  push:
  workflow_dispatch:

# if this branch is pushed back to back, cancel the older branch's workflow
concurrency:
  group: ${{ github.ref }} && ${{ github.workflow }}
  cancel-in-progress: true

jobs:
  test:
    strategy:
      # uses 1 CI machine
      matrix:
        machines: [1]
    runs-on: ubuntu-20.04
    steps:
      - name: Checkout ðŸ›Ž
        uses: actions/checkout@v2

      # https://github.com/cypress-io/github-action
      - name: Run api tests ðŸ§ª
        uses: cypress-io/github-action@v3.0.2
        with:
          browser: chrome

      - name: typecheck
        run: yarn typecheck

      - name: lint
        run: yarn lint
